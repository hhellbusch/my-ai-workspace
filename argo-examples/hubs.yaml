# List of OpenShift clusters to deploy ArgoCD applications to
# 
# Fields:
#   name: Friendly name for the cluster (used in logs)
#   server: OpenShift API server URL (e.g., https://api.cluster.example.com:6443)
#   argocd_namespace: Namespace where ArgoCD is installed (usually 'argocd')
#   token_secret: Name of the GitHub secret containing the service account token
#   dry_run: (optional) If true, only preview changes without applying (default: false)
#   argocd_server: (optional) ArgoCD server URL for CLI diff (e.g., argocd.example.com)
#   argocd_token_secret: (optional) GitHub secret name for ArgoCD auth token
#
# Important:
#   - Add corresponding GitHub secrets for each token_secret value
#   - Update the workflow env section when adding new clusters
#   - Clusters are deployed sequentially in the order listed
#   - dry_run can be set per-cluster or overridden via workflow_dispatch input
#   - Pull requests automatically run in dry-run mode (preview only)

clusters:
  - name: dev-cluster
    server: https://api.dev.example.com:6443
    argocd_namespace: argocd
    token_secret: OPENSHIFT_TOKEN_DEV
    dry_run: false  # Apply changes to dev
    argocd_server: argocd.dev.example.com  # Optional: for ArgoCD CLI diffs
    argocd_token_secret: ARGOCD_TOKEN_DEV  # Optional: ArgoCD auth token
    
  - name: staging-cluster
    server: https://api.staging.example.com:6443
    argocd_namespace: argocd
    token_secret: OPENSHIFT_TOKEN_STAGING
    dry_run: false  # Apply changes to staging
    argocd_server: argocd.staging.example.com
    argocd_token_secret: ARGOCD_TOKEN_STAGING
    
  - name: prod-cluster
    server: https://api.prod.example.com:6443
    argocd_namespace: argocd
    token_secret: OPENSHIFT_TOKEN_PROD
    dry_run: false  # Set to true to make prod preview-only
    argocd_server: argocd.prod.example.com
    argocd_token_secret: ARGOCD_TOKEN_PROD

